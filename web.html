<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Top Digital Internet Marketing & SEO Services – Leads Generation Firm</title>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: 'Arial', sans-serif;
            line-height: 1.6;
            color: #333;
            background-color: #f8f9fa;
        }

        .container {
            max-width: 1200px;
            margin: 0 auto;
            padding: 0 20px;
        }

        /* Header */
        .header {
            background: linear-gradient(135deg, #1e3c72 0%, #2a5298 100%);
            color: white;
            padding: 20px 0;
            box-shadow: 0 2px 10px rgba(0,0,0,0.1);
        }

        .nav {
            display: flex;
            justify-content: space-between;
            align-items: center;
        }

        .logo {
            font-size: 28px;
            font-weight: bold;
            color: #fff;
        }

        .nav-links {
            display: flex;
            list-style: none;
            gap: 30px;
        }

        .nav-links a {
            color: white;
            text-decoration: none;
            font-weight: 500;
            transition: color 0.3s;
        }

        .nav-links a:hover {
            color: #ffd700;
        }

        /* Hero Section */
        .hero {
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            color: white;
            padding: 80px 0;
            text-align: center;
        }

        .hero h1 {
            font-size: 48px;
            margin-bottom: 20px;
            font-weight: 700;
            line-height: 1.2;
        }

        .hero p {
            font-size: 20px;
            margin-bottom: 30px;
            max-width: 600px;
            margin-left: auto;
            margin-right: auto;
        }

        .cta-button {
            display: inline-block;
            background: #ff6b35;
            color: white;
            padding: 15px 30px;
            text-decoration: none;
            border-radius: 50px;
            font-weight: bold;
            font-size: 18px;
            transition: all 0.3s;
            box-shadow: 0 4px 15px rgba(255, 107, 53, 0.3);
        }

        .cta-button:hover {
            background: #e55a2b;
            transform: translateY(-2px);
            box-shadow: 0 6px 20px rgba(255, 107, 53, 0.4);
        }

        /* Services Section */
        .services {
            padding: 80px 0;
            background: white;
        }

        .section-title {
            text-align: center;
            font-size: 36px;
            margin-bottom: 50px;
            color: #2c3e50;
        }

        .services-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(300px, 1fr));
            gap: 30px;
            margin-top: 50px;
        }

        .service-card {
            background: white;
            padding: 30px;
            border-radius: 10px;
            box-shadow: 0 5px 15px rgba(0,0,0,0.1);
            transition: transform 0.3s, box-shadow 0.3s;
            border-left: 4px solid #667eea;
        }

        .service-card:hover {
            transform: translateY(-5px);
            box-shadow: 0 10px 25px rgba(0,0,0,0.15);
        }

        .service-card h3 {
            color: #2c3e50;
            margin-bottom: 15px;
            font-size: 24px;
        }

        .service-card p {
            color: #666;
            line-height: 1.6;
        }

        /* Stats Section */
        .stats {
            background: linear-gradient(135deg, #2c3e50 0%, #34495e 100%);
            color: white;
            padding: 60px 0;
        }

        .stats-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
            gap: 30px;
            text-align: center;
        }

        .stat-item h3 {
            font-size: 48px;
            margin-bottom: 10px;
            color: #ffd700;
        }

        .stat-item p {
            font-size: 18px;
        }

        /* Testimonials */
        .testimonials {
            padding: 80px 0;
            background: #f8f9fa;
        }

        .testimonial-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(350px, 1fr));
            gap: 30px;
            margin-top: 50px;
        }

        .testimonial {
            background: white;
            padding: 30px;
            border-radius: 10px;
            box-shadow: 0 5px 15px rgba(0,0,0,0.1);
        }

        .testimonial p {
            font-style: italic;
            margin-bottom: 20px;
            color: #555;
        }

        .testimonial-author {
            font-weight: bold;
            color: #2c3e50;
        }

        /* Footer */
        .footer {
            background: #2c3e50;
            color: white;
            padding: 50px 0;
            text-align: center;
        }

        .footer-content {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(250px, 1fr));
            gap: 40px;
            margin-bottom: 30px;
        }

        .footer-section h3 {
            margin-bottom: 20px;
            color: #ffd700;
        }

        .footer-section p, .footer-section a {
            color: #bdc3c7;
            text-decoration: none;
            line-height: 1.8;
        }

        .footer-section a:hover {
            color: #ffd700;
        }

        /* Chatbot Styles */
        .chatbot-container {
            position: fixed;
            bottom: 20px;
            right: 20px;
            z-index: 1000;
        }

        .chatbot-toggle {
            width: 60px;
            height: 60px;
            border-radius: 50%;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            border: none;
            color: white;
            font-size: 24px;
            cursor: pointer;
            box-shadow: 0 4px 15px rgba(0,0,0,0.2);
            transition: all 0.3s;
        }

        .chatbot-toggle:hover {
            transform: scale(1.1);
            box-shadow: 0 6px 20px rgba(0,0,0,0.3);
        }

        .chatbot-window {
            position: absolute;
            bottom: 80px;
            right: 0;
            width: 350px;
            height: 500px;
            background: white;
            border-radius: 10px;
            box-shadow: 0 10px 30px rgba(0,0,0,0.2);
            display: none;
            flex-direction: column;
            overflow: hidden;
        }

        .chatbot-header {
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            color: white;
            padding: 15px;
            text-align: center;
            font-weight: bold;
        }

        .chatbot-messages {
            flex: 1;
            padding: 20px;
            overflow-y: auto;
            max-height: 350px;
        }

        .message {
            margin-bottom: 15px;
            padding: 10px 15px;
            border-radius: 10px;
            max-width: 80%;
        }

        .bot-message {
            background: #f1f3f4;
            color: #333;
            align-self: flex-start;
        }

        .user-message {
            background: #667eea;
            color: white;
            align-self: flex-end;
            margin-left: auto;
        }

        .chatbot-input {
            padding: 16px;
            border-top: 1px solid #eee;
            display: flex;
            gap: 10px;
        }

        .chatbot-input input {
            flex: 1;
            padding: 10px;
            border: 1px solid #ddd;
            border-radius: 5px;
            outline: none;
            font-size: 16px;
        }

        .chatbot-input button {
            background: #667eea;
            color: white;
            border: none;
            padding: 10px 16px;
            border-radius: 5px;
            cursor: pointer;
            font-size: 18px;
        }

        .quick-options {
            display: flex;
            flex-wrap: wrap;
            gap: 10px;
            margin-top: 10px;
        }

        .quick-option {
            background: #667eea;
            color: white;
            border: none;
            padding: 8px 12px;
            border-radius: 15px;
            cursor: pointer;
            font-size: 12px;
            transition: background 0.3s;
        }

        .quick-option:hover {
            background: #5a67d8;
        }

        /* Responsive Design */
        @media (max-width: 768px) {
            .nav-links {
                display: none;
            }
            
            .hero h1 {
                font-size: 36px;
            }
            
            .hero p {
                font-size: 18px;
            }
            
            .chatbot-window {
                width: 300px;
                height: 450px;
            }
        }

        .chatbot-form-message {
            background: #f1f3f4;
            color: #333;
            align-self: flex-start;
            border-radius: 10px;
            padding: 10px 15px;
            margin-bottom: 15px;
            max-width: 80%;
            box-sizing: border-box;
        }

        #chatbotForm input, #chatbotForm button {
            font-size: 15px;
            padding: 8px 10px;
            border-radius: 5px;
            border: 1px solid #ddd;
            width: 100%;
            box-sizing: border-box;
        }

        #chatbotForm button {
            background: #667eea;
            color: white;
            border: none;
            cursor: pointer;
            font-weight: bold;
            transition: background 0.3s;
        }

        #chatbotForm button:hover {
            background: #5a67d8;
        }

        /* Add spacing between quick options and the next user message */
        .quick-options + .user-message,
        .quick-options + .message.user-message {
            margin-top: 16px;
        }

        /* Disabled input styles */
        .chatbot-input input:disabled {
            background-color: #f5f5f5;
            color: #999;
            cursor: not-allowed;
        }

        .chatbot-input button:disabled {
            background-color: #ccc;
            cursor: not-allowed;
        }
    </style>
</head>
<body>
    <!-- Header -->
    <header class="header">
        <div class="container">
            <nav class="nav">
                <div class="logo">DCM Moguls</div>
                <ul class="nav-links">
                    <li><a href="#home">Home</a></li>
                    <li><a href="#services">Services</a></li>
                    <li><a href="#contact">Contact</a></li>
                </ul>
            </nav>
        </div>
    </header>

    <!-- Hero Section -->
    <section class="hero" id="home">
        <div class="container">
            <h1>Helping Local Businesses Generate Additional New Clients On-Demand Every Month</h1>
            <p>We specialize in full-spectrum Digital Marketing and Online Business Consultation to help your business thrive with predictable growth.</p>
        </div>
    </section>

    <!-- Services Section -->
    <section class="services" id="services">
        <div class="container">
            <h2 class="section-title">Our Digital Marketing Services</h2>
            <div class="services-grid">
                <div class="service-card">
                    <h3>SEO for Lawyers</h3>
                    <p>Specialized SEO strategies to help law firms dominate local search results and attract high-quality clients seeking legal services.</p>
                </div>
                <div class="service-card">
                    <h3>PPC for Dentists</h3>
                    <p>Targeted pay-per-click advertising campaigns designed to bring qualified dental patients directly to your practice.</p>
                </div>
                <div class="service-card">
                    <h3>Digital Marketing for Contractors</h3>
                    <p>Comprehensive online marketing solutions to help contractors generate consistent leads and grow their business.</p>
                </div>
                <div class="service-card">
                    <h3>Small Business SEO</h3>
                    <p>Cost-effective SEO strategies tailored for small businesses to compete with larger competitors and increase online visibility.</p>
                </div>
                <div class="service-card">
                    <h3>Website Design & Development</h3>
                    <p>Fast, secure, and mobile-friendly WordPress websites that convert visitors into customers with optimized user experience.</p>
                </div>
                <div class="service-card">
                    <h3>Social Media Marketing</h3>
                    <p>Strategic social media campaigns to build brand awareness and engage with your target audience across multiple platforms.</p>
                </div>
            </div>
        </div>
    </section>

    <!-- Stats Section -->
    <section class="stats">
        <div class="container">
            <div class="stats-grid">
                <div class="stat-item">
                    <h3>600%+</h3>
                    <p>Average ROI</p>
                </div>
                <div class="stat-item">
                    <h3>95%</h3>
                    <p>Success Rate</p>
                </div>
                <div class="stat-item">
                    <h3>20+</h3>
                    <p>Years Experience</p>
                </div>
                <div class="stat-item">
                    <h3>500+</h3>
                    <p>Happy Clients</p>
                </div>
            </div>
        </div>
    </section>

    <!-- Testimonials Section -->
    <section class="testimonials">
        <div class="container">
            <h2 class="section-title">What Our Clients Say</h2>
            <div class="testimonial-grid">
                <div class="testimonial">
                    <p>"DCM provides great support, expertise and help for our business to optimize our online presence and strengthen our company to meet our goals. Their techs are very knowledgeable and attentive to our specific needs."</p>
                    <div class="testimonial-author">- Healthcare Business Owner</div>
                </div>
                <div class="testimonial">
                    <p>"Before working with DCM less than 10% of our new clients came from internet. Today the majority of our new clients call us directly after visiting our website. Our ROI grew by 600%."</p>
                    <div class="testimonial-author">- Legal Practice</div>
                </div>
                <div class="testimonial">
                    <p>"I did not expect to get on average now 10-15 new patients per month. I even had to refer out 5 patients to different specialists last month because we were completely booked."</p>
                    <div class="testimonial-author">- Dental Practice</div>
                </div>
            </div>
        </div>
    </section>

    <!-- Footer -->
    <footer class="footer" id="contact">
        <div class="container">
            <div class="footer-content">
                <div class="footer-section">
                    <h3>Contact Us</h3>
                    <p>Ready to grow your business?</p>
                    <p>Get your free consultation today!</p>
                </div>
                <div class="footer-section">
                    <h3>Services</h3>
                    <p>SEO Services</p>
                    <p>PPC Management</p>
                    <p>Website Design</p>
                    <p>Social Media Marketing</p>
                </div>
                <div class="footer-section">
                    <h3>Industries</h3>
                    <p>Lawyers & Attorneys</p>
                    <p>Dental Practices</p>
                    <p>Contractors & Home Services</p>
                    <p>Small Businesses</p>
                </div>
            </div>
            <p>&copy; 2024 DCM Moguls. All rights reserved.</p>
        </div>
    </footer>

    <!-- Chatbot -->
    <div class="chatbot-container">
        <button class="chatbot-toggle" onclick="toggleChat()">💬</button>
        <div class="chatbot-window" id="chatbot">
            <div class="chatbot-header">
                DCM Moguls Assistant
            </div>
            <div class="chatbot-messages" id="chatMessages">
                <div class="message bot-message">
                    Hi! I'm here to help you learn about DCM Moguls' digital marketing services. Are you a small business owner, lawyer, dentist, or contractor?
                </div>
                <div class="quick-options">
                    <button class="quick-option" onclick="selectBusinessType('small business owner')">Small Business Owner</button>
                    <button class="quick-option" onclick="selectBusinessType('lawyer')">Lawyer</button>
                    <button class="quick-option" onclick="selectBusinessType('dentist')">Dentist</button>
                    <button class="quick-option" onclick="selectBusinessType('contractor')">Contractor</button>
                </div>
            </div>
            <div class="chatbot-input">
                <input type="text" id="userInput" placeholder="Please fill in the details first" onkeypress="handleKeyPress(event)" disabled>
                <button onclick="sendMessage()" disabled>Send</button>
            </div>
        </div>
    </div>

    <script>
        // Chatbot functionality
        let currentStep = 'businessType';
        let userInfo = {};
        let isCollectingInfo = false;
        let collectingField = '';
        let isInputEnabled = false;

        // Load API key from api.txt
        let OPENROUTER_API_KEY = null;

        // Function to load API key from api.txt
        async function loadApiKey() {
            try {
                const response = await fetch('./api.txt');
                if (response.ok) {
                    OPENROUTER_API_KEY = (await response.text()).trim();
                    console.log('API key loaded from api.txt');
                    return true;
                } else {
                    console.error('Could not load api.txt');
                    return false;
                }
            } catch (error) {
                console.error('Error loading api.txt:', error);
                return false;
            }
        }

        // Initialize API key when page loads
        document.addEventListener('DOMContentLoaded', async function() {
            const keyLoaded = await loadApiKey();
            if (!keyLoaded) {
                console.warn('API key not loaded. LLM features may not work.');
            }
            
            const userInput = document.getElementById('userInput');
            const sendButton = document.querySelector('.chatbot-input button');
            
            // Disable input initially
            userInput.disabled = true;
            sendButton.disabled = true;
            userInput.placeholder = "Please fill in the details first";
        });

        const GOOGLE_SHEETS_WEBHOOK_URL = 'https://script.google.com/macros/s/AKfycbxuaLIKsCjjKZulByjiAlW7eeEdgUU0a96KByA205BGsHAs9p6ed4cbDq0g0kiC7ts9YA/exec';

        // FAQ data with embeddings (simplified version)
        const FAQS = [
            {
                question: "What is your pricing structure?",
                answer: "Our pricing is customized based on your specific needs and market competition. We offer transparent, upfront pricing with no hidden fees. Most clients see a 600%+ ROI within the first 6 months.",
                keywords: ["price", "cost", "pricing", "fee", "how much"]
            },
            {
                question: "How long does it take to see SEO results?",
                answer: "SEO results typically begin showing within 30-60 days, with significant improvements in 3-6 months. Our clients often see their business appear in the top 3 Google Maps results within just 30 days.",
                keywords: ["how long", "timeline", "results", "when", "time"]
            },
            {
                question: "Do you offer money-back guarantee?",
                answer: "Yes! We offer guaranteed results with a 95% success rate. If we don't deliver the promised results within the agreed timeframe, we provide a full refund.",
                keywords: ["guarantee", "refund", "money back", "warranty"]
            },
            {
                question: "What services do you offer?",
                answer: "We offer comprehensive digital marketing services including SEO, PPC management, social media marketing, and local business optimization. We specialize in helping businesses dominate their local market.",
                keywords: ["services", "what do you do", "offer", "help"]
            }
        ];

        // Simple keyword matching function
        function findBestFAQMatch(userQuery) {
            const lowerQuery = userQuery.toLowerCase();
            let bestMatch = null;
            let bestScore = 0;

            FAQS.forEach(faq => {
                let score = 0;
                faq.keywords.forEach(keyword => {
                    if (lowerQuery.includes(keyword)) {
                        score += 1;
                    }
                });
                if (score > bestScore) {
                    bestScore = score;
                    bestMatch = faq;
                }
            });

            return bestScore > 0 ? bestMatch : null;
        }

        // LLM function using OpenRouter API
        async function getLLMResponse(userQuery, faqAnswer) {
            // Check if API key is loaded
            if (!OPENROUTER_API_KEY || OPENROUTER_API_KEY === 'YOUR_API_KEY_HERE') {
                console.log('❌ No valid API key found, using fallback answer');
                return faqAnswer;
            }

            try {
                const prompt = `You are a professional customer service representative for DCM Moguls, a digital marketing company.

User asked: "${userQuery}"

Here is the relevant information: ${faqAnswer}

Please provide a concise, professional, and polite response that directly answers the user's question. Keep it brief (2-3 sentences maximum) and maintain a professional yet friendly tone. Be straightforward but courteous.

IMPORTANT: Do NOT include any preamble, explanation, or phrases like "Here's a possible response." Do NOT wrap your response in quotes. Only reply with the message you would send to the user.`;

                const response = await fetch('https://openrouter.ai/api/v1/chat/completions', {
                    method: 'POST',
                    headers: {
                        'Authorization': `Bearer ${OPENROUTER_API_KEY}`,
                        'Content-Type': 'application/json',
                        'HTTP-Referer': 'https://huggingface.co',
                        'X-Title': 'DCM Moguls Chatbot'
                    },
                    body: JSON.stringify({
                        model: 'meta-llama/llama-3.2-1b-instruct:free',
                        messages: [
                            {
                                role: 'user',
                                content: prompt
                            }
                        ],
                        max_tokens: 150,
                        temperature: 0.3
                    })
                });

                if (response.ok) {
                    const result = await response.json();
                    let llmResponse = result.choices[0].message.content.trim();
                    
                    // Remove quotes from beginning and end if present
                    if (llmResponse.startsWith('"') && llmResponse.endsWith('"')) {
                        llmResponse = llmResponse.slice(1, -1);
                    }
                    
                    return llmResponse;
                } else {
                    console.log('LLM API error:', response.status, response.statusText);
                    return faqAnswer; // Fallback to original answer
                }
            } catch (error) {
                console.log('LLM error:', error);
                return faqAnswer; // Fallback to original answer
            }
        }

        function toggleChat() {
            const chatbot = document.getElementById('chatbot');
            chatbot.style.display = chatbot.style.display === 'flex' ? 'none' : 'flex';
        }

        function addMessage(message, isUser = false) {
            const messagesContainer = document.getElementById('chatMessages');
            const messageDiv = document.createElement('div');
            messageDiv.className = `message ${isUser ? 'user-message' : 'bot-message'}`;
            messageDiv.textContent = message;
            messagesContainer.appendChild(messageDiv);
            messagesContainer.scrollTop = messagesContainer.scrollHeight;
        }

        function addQuickOptions(options) {
            const messagesContainer = document.getElementById('chatMessages');
            const optionsDiv = document.createElement('div');
            optionsDiv.className = 'quick-options';
            
            options.forEach(option => {
                const button = document.createElement('button');
                button.className = 'quick-option';
                button.textContent = option.text;
                button.onclick = option.action;
                optionsDiv.appendChild(button);
            });
            
            messagesContainer.appendChild(optionsDiv);
            messagesContainer.scrollTop = messagesContainer.scrollHeight;
        }

        function selectBusinessType(type) {
            userInfo.businessType = type;
            addMessage(type, true);
            
            let serviceDescription = '';
            switch(type) {
                case 'lawyer':
                    serviceDescription = 'Perfect! We specialize in SEO for law firms. Our legal SEO services help attorneys dominate local search results, attract high-quality clients, and grow their practice with a guaranteed 600%+ ROI.';
                    break;
                case 'dentist':
                    serviceDescription = 'Excellent! We offer specialized PPC management for dental practices. Our targeted campaigns bring qualified patients directly to your practice, with most clients seeing 10-15 new patients per month.';
                    break;
                case 'contractor':
                    serviceDescription = 'Great! We provide comprehensive digital marketing for contractors and home service businesses. Our strategies help you generate consistent leads and dominate your local market.';
                    break;
                case 'small business owner':
                    serviceDescription = 'Wonderful! We offer cost-effective digital marketing solutions for small businesses. Our full-spectrum approach includes SEO, PPC, and social media to help you compete with larger competitors.';
                    break;
            }
            
            addMessage(serviceDescription);
            
            setTimeout(() => {
                addMessage("To provide you with a customized marketing strategy, please fill out the form below:");
                showChatbotForm();
            }, 1000);
        }

        function showChatbotForm() {
            if (!userInfo.businessType) {
                alert("Please select your profession type before filling the form.");
                return;
            }
            // Remove any existing form
            const oldForm = document.getElementById('chatbotForm');
            if (oldForm) oldForm.parentNode.removeChild(oldForm);

            const messagesContainer = document.getElementById('chatMessages');
            const formDiv = document.createElement('div');
            formDiv.className = 'message bot-message chatbot-form-message';
            formDiv.innerHTML = `
                <form id="chatbotForm" style="display:flex; flex-direction:column; gap:10px;">
                    <input type="text" id="fullName" placeholder="Full Name" required autocomplete="off">
                    <input type="email" id="email" placeholder="Email" required autocomplete="off">
                    <input type="text" id="phone" placeholder="Phone Number (12 digits, no '+')" required autocomplete="off">
                    <button type="submit" style="margin-top:5px;">Submit</button>
                    <div id="formError" style="color:red; font-size:12px; margin-top:5px;"></div>
                </form>
            `;
            messagesContainer.appendChild(formDiv);
            messagesContainer.scrollTop = messagesContainer.scrollHeight;

            // Attach the submit handler
            document.getElementById('chatbotForm').addEventListener('submit', function(e) {
                e.preventDefault();
                const fullName = document.getElementById('fullName').value.trim();
                const email = document.getElementById('email').value.trim();
                const phone = document.getElementById('phone').value.trim();
                const errorDiv = document.getElementById('formError');
                errorDiv.textContent = '';

                // Full Name: only alphabets and spaces
                if (!/^[A-Za-z ]+$/.test(fullName)) {
                    errorDiv.textContent = 'Full Name must contain only alphabets and spaces.';
                    return;
                }
                // Email: basic validation
                if (!/^[^\s@]+@[^\s@]+\.[^\s@]+$/.test(email)) {
                    errorDiv.textContent = 'Please enter a valid email address.';
                    return;
                }
                // Phone: 12 digits, no '+'
                if (!/^\d{12}$/.test(phone)) {
                    errorDiv.textContent = 'Phone number must be exactly 12 digits (including country code, no "+").';
                    return;
                }

                // Add form fields to userInfo
                userInfo.fullName = fullName;
                userInfo.email = email;
                userInfo.phone = phone;

                console.log('Form submitted with data:', userInfo);

                // Hide form and show confirmation
                formDiv.style.display = 'none';
                addMessage(`Thank you, ${fullName}! Our team will reach out to you at ${email} and ${phone} soon.`);

                // ENABLE THE INPUT NOW
                isInputEnabled = true;
                const userInput = document.getElementById('userInput');
                const sendButton = document.querySelector('.chatbot-input button');
                userInput.disabled = false;
                sendButton.disabled = false;
                userInput.placeholder = "Type your message...";

                // Show FAQ options after thank you message
                setTimeout(() => {
                    const faqOptions = [
                        { text: 'Pricing Structure', action: () => handleFAQ('pricing') },
                        { text: 'SEO Results Timeline', action: () => handleFAQ('timeline') },
                        { text: 'Money-Back Guarantee', action: () => handleFAQ('guarantee') },
                        { text: 'Schedule Consultation', action: () => handleFAQ('consultation') }
                    ];
                    addQuickOptions(faqOptions);
                }, 500);

                // Send data directly to Google Sheets
                sendToGoogleSheets(userInfo);
            });
        }

        function sendToGoogleSheets(userData) {
            console.log('Sending data to Google Sheets:', userData);
            
            const payload = {
                name: userData.fullName,
                email: userData.email,
                phone: userData.phone,
                professionType: userData.businessType
            };

            // Only use form data method (CORS-free)
            const formData = new FormData();
            formData.append('name', payload.name);
            formData.append('email', payload.email);
            formData.append('phone', payload.phone);
            formData.append('professionType', payload.professionType);

            fetch(GOOGLE_SHEETS_WEBHOOK_URL, {
                method: 'POST',
                body: formData
            })
            .then(response => {
                console.log('Form data response status:', response.status);
                return response.text();
            })
            .then(data => {
                console.log('Form data response:', data);
                if (data.includes('success') || data.includes('Success') || data.includes('"status":"success"')) {
                    console.log('✅ Data sent to Google Sheets successfully!');
                } else {
                    console.log('❌ Failed to send data to Google Sheets');
                }
            })
            .catch(err => {
                console.log('❌ Error sending data to Google Sheets:', err);
            });
        }

        function handleFAQ(topic) {
            let response = '';
            switch(topic) {
                case 'pricing':
                    addMessage('Pricing Structure', true);
                    response = 'Our pricing is customized based on your specific needs and market competition. We offer transparent, upfront pricing with no hidden fees. Most clients see a 600%+ ROI within the first 6 months. Would you like to schedule a free consultation to get your personalized quote?';
                    break;
                case 'timeline':
                    addMessage('SEO Results Timeline', true);
                    response = 'SEO results typically begin showing within 30-60 days, with significant improvements in 3-6 months. Our clients often see their business appear in the top 3 Google Maps results within just 30 days. The timeline depends on your industry competition and current online presence.';
                    break;
                case 'guarantee':
                    addMessage('Money-Back Guarantee', true);
                    response = 'Yes! We offer guaranteed results with a 95% success rate. If we don\'t deliver the promised results within the agreed timeframe, we provide a full refund. We\'re so confident in our methods that we put our money where our mouth is.';
                    break;
                case 'consultation':
                    addMessage('Schedule Consultation', true);
                    response = `Thanks for your interest, ${userInfo.fullName || 'there'}! I'll have our team reach out to you within 24 hours to schedule your free SEO audit and consultation.`;
                    
                    setTimeout(() => {
                        addMessage('✅ Your information has been logged to our system and a follow-up email has been sent. Our team will contact you soon!');
                    }, 2000);
                    break;
            }
            
            addMessage(response);
            
            if (topic !== 'consultation') {
                setTimeout(() => {
                    addMessage('Do you have any other questions?');
                    const moreOptions = [
                        { text: 'Pricing Structure', action: () => handleFAQ('pricing') },
                        { text: 'SEO Results Timeline', action: () => handleFAQ('timeline') },
                        { text: 'Money-Back Guarantee', action: () => handleFAQ('guarantee') },
                        { text: 'Schedule Consultation', action: () => handleFAQ('consultation') }
                    ];
                    addQuickOptions(moreOptions);
                }, 1000);
            }
        }

        function validateEmail(email) {
            const re = /^[^\s@]+@[^\s@]+\.[^\s@]+$/;
            return re.test(email);
        }

        function sendMessage() {
            if (!isInputEnabled) {
                return;
            }
            
            const input = document.getElementById('userInput');
            const message = input.value.trim();
            
            if (message) {
                addMessage(message, true);
                input.value = '';
                
                // Handle general questions with keyword matching
                handleGeneralQuery(message);
            }
        }

        function handleGeneralQuery(message) {
            const lowerMessage = message.toLowerCase();
            
            // First try to find FAQ match
            const faqMatch = findBestFAQMatch(message);
            
            if (faqMatch) {
                // Use LLM to enhance the FAQ answer
                getLLMResponse(message, faqMatch.answer)
                    .then(llmAnswer => {
                        addMessage(llmAnswer);
                        
                        // Show follow-up options after LLM response
                        setTimeout(() => {
                            const followUpOptions = [
                                { text: 'Pricing Structure', action: () => handleFAQ('pricing') },
                                { text: 'SEO Results Timeline', action: () => handleFAQ('timeline') },
                                { text: 'Money-Back Guarantee', action: () => handleFAQ('guarantee') },
                                { text: 'Schedule Consultation', action: () => handleFAQ('consultation') },
                                { text: 'Ask Another Question', action: () => addMessage('What would you like to know?') }
                            ];
                            addQuickOptions(followUpOptions);
                        }, 1000);
                    })
                    .catch(error => {
                        console.log('LLM failed, using fallback:', error);
                        // Fallback to hardcoded response
                        handleHardcodedResponse(message);
                    });
            } else {
                // No FAQ match found, use hardcoded responses
                handleHardcodedResponse(message);
            }
        }

        function handleHardcodedResponse(message) {
            const lowerMessage = message.toLowerCase();
            if (lowerMessage.includes('price') || lowerMessage.includes('cost')) {
                handleFAQ('pricing');
            } else if (lowerMessage.includes('result') || lowerMessage.includes('how long')) {
                handleFAQ('timeline');
            } else if (lowerMessage.includes('guarantee') || lowerMessage.includes('refund')) {
                handleFAQ('guarantee');
            } else if (lowerMessage.includes('consultation') || lowerMessage.includes('call') || lowerMessage.includes('contact')) {
                handleFAQ('consultation');
            } else {
                addMessage("I'd be happy to help! Here are some common questions I can answer:");
                setTimeout(() => {
                    const options = [
                        { text: 'Pricing Structure', action: () => handleFAQ('pricing') },
                        { text: 'SEO Results Timeline', action: () => handleFAQ('timeline') },
                        { text: 'Money-Back Guarantee', action: () => handleFAQ('guarantee') },
                        { text: 'Schedule Consultation', action: () => handleFAQ('consultation') }
                    ];
                    addQuickOptions(options);
                }, 500);
            }
        }

        function handleKeyPress(event) {
            if (event.key === 'Enter' && isInputEnabled) {
                sendMessage();
            }
        }

        // Smooth scrolling for navigation links
        document.querySelectorAll('a[href^="#"]').forEach(anchor => {
            anchor.addEventListener('click', function (e) {
                e.preventDefault();
                document.querySelector(this.getAttribute('href')).scrollIntoView({
                    behavior: 'smooth'
                });
            });
        });
    </script>
</body>
</html>
